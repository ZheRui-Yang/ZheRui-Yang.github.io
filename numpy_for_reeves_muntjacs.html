<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW" xml:lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.5, user-scalable=yes" />
  <meta name="author" content="Zhe-Rui, Yang" />
  <title>山羌也能懂的 — NumPy</title>
  <link rel="stylesheet" href="./css/aws-rek.css" />
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" type="text/javascript"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">山羌也能懂的 — NumPy</h1>
</header>
<nav id="TOC" role="doc-toc">
<h2 id="toc-title">Contents</h2>
<ul>
<li><a href="#為什麼要用-numpy">為什麼要用 NumPy ？</a></li>
<li><a href="#真正開始之前">真正開始之前…</a>
<ul>
<li><a href="#先備知識">先備知識</a></li>
<li><a href="#書寫慣例">書寫慣例</a></li>
<li><a href="#安裝與匯入">安裝與匯入</a></li>
</ul></li>
<li><a href="#什麼是-numpy.ndarrayndarray">什麼是 <span><code class="sourceCode python">numpy.ndarray</code></span></a></li>
<li><a href="#如何建立-numpy.ndarray">如何建立 <code class="sourceCode python">numpy.ndarray</code> ？</a>
<ul>
<li><a href="#借助-numpy.arrayarray-函式">借助 <span><code class="sourceCode python">numpy.array</code></span> 函式</a></li>
<li><a href="#借助其他輔助函式">借助其他輔助函式</a></li>
<li><a href="#其他方式">其他方式</a></li>
</ul></li>
<li><a href="#numpy.ndarray-被印出時的反應"><code class="sourceCode python">numpy.ndarray</code> 被印出時的反應</a></li>
<li><a href="#基本操作">基本操作</a></li>
<li><a href="#universal-functionsuniversal"><span>Universal Functions</span></a></li>
<li><a href="#索引-indexing-與切片-slicing">索引（ indexing ）與切片（ slicing ）</a></li>
<li><a href="#迭代-iteration">迭代 （ iteration ）</a></li>
<li><a href="#重塑">重塑</a>
<ul>
<li><a href="#numpy.ndarray.tt"><span><code class="sourceCode python">numpy.ndarray.T</code></span></a></li>
<li><a href="#numpy.ndarray.reshapereshape"><span><code class="sourceCode python">numpy.ndarray.reshape</code></span></a></li>
<li><a href="#numpy.ndarray.ravelravel"><span><code class="sourceCode python">numpy.ndarray.ravel</code></span></a></li>
<li><a href="#numpy.vstackvstack"><span><code class="sourceCode python">numpy.vstack</code></span></a></li>
<li><a href="#numpy.hstackhstack"><span><code class="sourceCode python">numpy.hstack</code></span></a></li>
<li><a href="#numpy.hsplithsplit"><span><code class="sourceCode python">numpy.hsplit</code></span></a></li>
<li><a href="#numpy.vsplitvsplit"><span><code class="sourceCode python">numpy.vsplit</code></span></a></li>
</ul></li>
<li><a href="#view-與複製">「 View 」與複製</a>
<ul>
<li><a href="#這樣做不會複製任何東西">這樣做不會複製任何東西</a></li>
<li><a href="#view-最淺層的複製">View — 最淺層的複製</a></li>
<li><a href="#更深一層複製">更深一層複製</a></li>
<li><a href="#完全複製">完全複製</a></li>
</ul></li>
<li><a href="#小技巧">小技巧</a>
<ul>
<li><a href="#自動成型">自動成型</a></li>
<li><a href="#運用兩個等長的一維陣列組成一個二維陣列">運用兩個等長的一維陣列組成一個二維陣列</a></li>
<li><a href="#運用邏輯運算抽取元素">運用邏輯運算抽取元素</a></li>
</ul></li>
<li><a href="#最後">最後</a></li>
<li><a href="#你可能還想看">你可能還想看…</a></li>
</ul>
</nav>
<nav id="SideTOC" role="doc-toc">
<h2 id="toc-title">Contents</h2>
<ul>
<li><a href="#為什麼要用-numpy">為什麼要用 NumPy ？</a></li>
<li><a href="#真正開始之前">真正開始之前…</a>
<ul>
<li><a href="#先備知識">先備知識</a></li>
<li><a href="#書寫慣例">書寫慣例</a></li>
<li><a href="#安裝與匯入">安裝與匯入</a></li>
</ul></li>
<li><a href="#什麼是-numpy.ndarrayndarray">什麼是 <span><code class="sourceCode python">numpy.ndarray</code></span></a></li>
<li><a href="#如何建立-numpy.ndarray">如何建立 <code class="sourceCode python">numpy.ndarray</code> ？</a>
<ul>
<li><a href="#借助-numpy.arrayarray-函式">借助 <span><code class="sourceCode python">numpy.array</code></span> 函式</a></li>
<li><a href="#借助其他輔助函式">借助其他輔助函式</a></li>
<li><a href="#其他方式">其他方式</a></li>
</ul></li>
<li><a href="#numpy.ndarray-被印出時的反應"><code class="sourceCode python">numpy.ndarray</code> 被印出時的反應</a></li>
<li><a href="#基本操作">基本操作</a></li>
<li><a href="#universal-functionsuniversal"><span>Universal Functions</span></a></li>
<li><a href="#索引-indexing-與切片-slicing">索引（ indexing ）與切片（ slicing ）</a></li>
<li><a href="#迭代-iteration">迭代 （ iteration ）</a></li>
<li><a href="#重塑">重塑</a>
<ul>
<li><a href="#numpy.ndarray.tt"><span><code class="sourceCode python">numpy.ndarray.T</code></span></a></li>
<li><a href="#numpy.ndarray.reshapereshape"><span><code class="sourceCode python">numpy.ndarray.reshape</code></span></a></li>
<li><a href="#numpy.ndarray.ravelravel"><span><code class="sourceCode python">numpy.ndarray.ravel</code></span></a></li>
<li><a href="#numpy.vstackvstack"><span><code class="sourceCode python">numpy.vstack</code></span></a></li>
<li><a href="#numpy.hstackhstack"><span><code class="sourceCode python">numpy.hstack</code></span></a></li>
<li><a href="#numpy.hsplithsplit"><span><code class="sourceCode python">numpy.hsplit</code></span></a></li>
<li><a href="#numpy.vsplitvsplit"><span><code class="sourceCode python">numpy.vsplit</code></span></a></li>
</ul></li>
<li><a href="#view-與複製">「 View 」與複製</a>
<ul>
<li><a href="#這樣做不會複製任何東西">這樣做不會複製任何東西</a></li>
<li><a href="#view-最淺層的複製">View — 最淺層的複製</a></li>
<li><a href="#更深一層複製">更深一層複製</a></li>
<li><a href="#完全複製">完全複製</a></li>
</ul></li>
<li><a href="#小技巧">小技巧</a>
<ul>
<li><a href="#自動成型">自動成型</a></li>
<li><a href="#運用兩個等長的一維陣列組成一個二維陣列">運用兩個等長的一維陣列組成一個二維陣列</a></li>
<li><a href="#運用邏輯運算抽取元素">運用邏輯運算抽取元素</a></li>
</ul></li>
<li><a href="#最後">最後</a></li>
<li><a href="#你可能還想看">你可能還想看…</a></li>
</ul>
</nav>
<span id="change-point"></span>

<svg id="toc-button" width="104" height="124" onclick="sideTOCOn();">
  <rect x="2" y="2" rx="20" ry="20" width="100" height="120" />
  <line x1="15" y1="18" x2="90" y2="18" />
  <line x1="25" y1="36" x2="90" y2="36" />
  <line x1="25" y1="54" x2="90" y2="54" />
  <line x1="15" y1="72" x2="90" y2="72" />
  <line x1="25" y1="89" x2="90" y2="89" />
  <line x1="25" y1="106" x2="90" y2="106" />
</svg>
<svg
   style="display:none;left:18.8%;top:0;position:fixed;z-index:+2"
   width="200"
   height="87.5%"
   viewBox="0 0 10 1"
   version="1.1"
   id="tocBackButton"
   inkscape:version="1.1 (c4e8f9ed74, 2021-05-24)"
   sodipodi:docname="toc-back.svg"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <defs
     id="defs2" />
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <rect
       onclick="sideTOCOff();"
       onmouseover="tocBackColorOn();"
       onmouseout="tocBackColorOff();"
       style="fill:#fff6d5;stroke:#ffcc00;stroke-width:0.257858"
       id="rect99"
       width="1.3457851"
       height="3.967304"
       x="1.4001381"
       y="0.12783527" />
    <path
       onclick="sideTOCOff();"
       onmouseover="tocBackColorOn();"
       onmouseout="tocBackColorOff();"
       style="fill:none;stroke:#ffcc00;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 2.7459233,0.12783527 1.418214,2.1532691 v 0 l 1.3277093,1.9418705"
       id="path1513" />
    <path
       onclick="sideTOCOff();"
       onmouseover="tocBackColorOn();"
       onmouseout="tocBackColorOff();"
       style="fill:none;stroke:#ffcc00;stroke-width:0.264583px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="M 2.7282563,1.0071049 2.0114379,2.1081016 2.7381797,3.1605769"
       id="path1548" />
  </g>
</svg>

<p><a href="https://numpy.org/"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/NumPy_logo_2020.svg/512px-NumPy_logo_2020.svg.png" /></a></p>
<p>NumPy （ Numerical Python ）是被廣泛應用在各項工程、科學領域的 Python 函式庫（ library ），也是 PyData 和 Python 在科學領域應用系統的核心 — Pandas 、 SciPy 、 Matplotlib 、 scikit-learn 、 scikit-image 等等資料科學或其他科學領域的 Python 套件內都能見到 NumPy 的應用程式接口（ API ）。<br />
NumPy 的主要內容為一個描述多維陣列與矩陣的資料結構 — <strong>ndarray</strong>類型（ class ）— 一個均質的（ homogeneous ）、可為一維或高維的陣列物件。</p>
<section id="為什麼要用-numpy" class="level2">
<h2>為什麼要用 NumPy ？</h2>
<p>NumPy 的主要物件 <code class="sourceCode python">numpy.ndarray</code> 將 Python 程式碼「向量化」（ vectorize ），帶來以下好處：</p>
<ul>
<li>避免迷失在 for 迴圈的迷宮之中</li>
<li>讓程式碼閱讀更直覺、更輕鬆</li>
<li>精簡程式碼 — 更短的程式碼代表更少的錯誤</li>
</ul>
<p>使用 Pandas 、 SciPy 、 Matplotlib 、 scikit-learn 、 scikit-image 等等的套件時都能見到 NumPy 的身影。</p>
<p>NumPy 的底層由 C 語言寫成，這代表在面對大資料量或高維度的場景時，NumPy 將會比純 Python 更快完成任務。</p>
<!--
TODO: vectorize??
TODO: before vectorize, 2-D arrays do inner product.
-->
</section>
<section id="真正開始之前" class="level2">
<h2>真正開始之前…</h2>
<section id="先備知識" class="level3">
<h3>先備知識</h3>
<p>雖然目標是寫給毫無經驗的大家看的，不過畢竟是第三方套件（ package ），再怎樣簡化也有個底限。由於這是專門用來做數值運算的 Python 套件，數學與程式方面各需要一點點概念才能順暢的理解：</p>
<ul>
<li>程式方面
<ul>
<li>基礎 Python — 官方有個不錯的<a href="https://docs.python.org/zh-tw/3/tutorial/">教學</a>，本文會用到的概念是 for 迴圈、函式、類別（ type ）與串列</li>
<li>陣列 — 就把它想像成固定長度、所有元素也統一類別的 Python 串列就好</li>
<li>張量（ tensor ）在任何程式語言的實作概念</li>
</ul></li>
<li>數學方面
<ul>
<li>張量的「形狀」</li>
<li>內積、外積與矩陣轉置</li>
</ul></li>
</ul>
<p>當然，不見得以上知識都通曉才能閱讀，但若懂的話我保證這份文件對你毫無障礙。對於絕大部分的內容，我相信只要上面列舉的各項都有個概念就夠了。</p>
<!--
TODO: what is tensor - 0-D to n-D
TODO: how to implement tensor
-->
</section>
<section id="書寫慣例" class="level3">
<h3>書寫慣例</h3>
<p>本文力求直覺簡單，但仍有些風格相關的書寫格式可以了解一下。</p>
<p>容易混淆的、從字面上比較難懂的、以及自創詞會在該詞中文第一次出現時在後方括號裡附上原文，例如上方的類型（ class ）與類別（ type ）。每當我寫到「類型」時就不會是「類別」，反之亦然。另外 NumPy 與 Python 這種專有名詞我會保留原文。</p>
<p>接下來會大量提到 NumPy 的函式與物件。在本文提到的應用程式接口都是不完整的，但在第一次介紹時我會附上其官方文件的連結。官方文件裡會對該應用程式接口做完整、詳盡的介紹，有興趣者請隨連結查閱。</p>
<p>內文與標題會有一些使用等寬、無裝飾、且帶有底色的英文字串，那些字代表你可以在 Python 程式碼手稿（ script ）或互動式殼層（ interactive shell ）裡用完全相同的語句參照（ reference ）到該物件、又或是代表程式語言相關的字詞（例如：<code class="sourceCode python"><span class="bu">int</span></code> 類別），或者終端機（ terminal ）指令。另外，內文與標題的模組（ module ）名稱會是全名，跟程式碼區塊中的有所不同。底下安裝與匯入一節有做說明。</p>
<p>為行文方便，我有時會把 <code class="sourceCode python">numpy.ndarray</code> 稱為陣列，閱讀時請稍加留意。</p>
<p>Python 程式碼範例的部份，考慮到精簡、易懂與泛用，本文會使用原生互動式殼層相似的書寫格式：</p>
<ul>
<li><code class="sourceCode bash"><span class="op">&gt;&gt;&gt;</span></code> 代表人手輸入的第一行</li>
<li><code class="sourceCode bash"><span class="ex">...</span></code> 出現在行首時代表人手輸入的第二行之後，用於表示一行沒有完成的程式碼區塊</li>
<li>程式輸出會直接靠著行首，沒有提示</li>
</ul>
<p>例如：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>...     <span class="bu">print</span>(i)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span></code></pre></div>
<p>一個 <code class="sourceCode python"><span class="op">&gt;&gt;&gt;</span></code> 後面連接零個到數個 <code class="sourceCode python">...</code> 標示一個完整的指令。</p>
<p>最後，應用程式接口的解說裡，若參數（ argument ）後面未加等號 <code class="sourceCode python"><span class="op">=</span></code> 為位置參數，若有出現則其出現的位置會影響它的意思。中括弧內的位置參數可省略不寫，它們是被設計成有預設值的位置參數。<br />
而參數後面有等號 <code class="sourceCode python"><span class="op">=</span></code> 的參數稱為關鍵字參數，其擺放位置只限制在所有位置參數之後，次序無所謂。關鍵字參數的等號後面接的值正是預設值，若不想改動預設值可不必明文寫出。<br />
例如：</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">range</span>([start, ]stop[, step])</span></code></pre></div>
<p>表示 <code class="sourceCode python"><span class="bu">range</span></code> 函數有三個位置參數，其中 <code class="sourceCode python">start</code> 與 <code class="sourceCode python">step</code> 可省略。</p>
</section>
<section id="安裝與匯入" class="level3">
<h3>安裝與匯入</h3>
<section id="安裝" class="level4">
<h4>安裝</h4>
<p>NumPy 可以由 <code class="sourceCode bash"><span class="ex">conda</span></code> 或 <code class="sourceCode bash"><span class="ex">pip</span></code> 套件管理器<a href="https://numpy.org/install/">安裝</a>、由 MacOS 或 Linux 的套件管理器安裝，或者是從<a href="https://numpy.org/devdocs/user/building.html">原始碼</a>安裝。</p>
<ul>
<li><p>經由 <code class="sourceCode bash"><span class="ex">conda</span></code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install numpy</span></code></pre></div></li>
<li><p>經由 <code class="sourceCode bash"><span class="ex">pip</span></code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install numpy</span></code></pre></div></li>
</ul>
<p>使用 MacOS 或 Linux 套件管理器安裝的朋友請洽自己的套件管理器文件，若是使用 Anaconda 或 Colab 寫程式的朋友則不須安裝。</p>
</section>
<section id="匯入" class="level4">
<h4>匯入</h4>
<p>使用以下語句匯入：</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code></pre></div>
<p>將 NumPy 匯入成 <code class="sourceCode bash"><span class="ex">np</span></code> 這個代號（ alias ）已是不成文的規矩，但不強制。接下來所有的 Python 程式碼區塊裡我們將預設 NumPy 已被匯入為 <code class="sourceCode bash"><span class="ex">np</span></code> 。</p>
</section>
</section>
</section>
<section id="什麼是-numpy.ndarrayndarray" class="level2">
<h2>什麼是 <a href="https://numpy.org/doc/stable/reference/arrays.ndarray.html"><code class="sourceCode python">numpy.ndarray</code></a></h2>
<p>NumPy 的主要物件 — <code class="sourceCode python">numpy.ndarray</code> 是一個均質且多維的陣列，各維度的子陣列（在該維度內）長度均一、所有元素皆為同一類別。<br />
在 NumPy 中維度被稱為「 軸（ axis ） 」。</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], dtype<span class="op">=</span>np.int32)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], dtype<span class="op">=</span>int32)</span></code></pre></div>
<p>當然也可以多維，這裡是一個二維的 <code class="sourceCode python">numpy.ndarray</code> ：</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.fromfunction(<span class="kw">lambda</span> x, y: <span class="dv">10</span> <span class="op">*</span> x <span class="op">+</span> y, (<span class="dv">5</span>, <span class="dv">4</span>), dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>],</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>],</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>],</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">30</span>, <span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>],</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">40</span>, <span class="dv">41</span>, <span class="dv">42</span>, <span class="dv">43</span>]])</span></code></pre></div>
<p>上例中第一個軸長度為 5 ，第二個軸長度為 4 。</p>
<p>需要注意的是，每個維度裡的元素<strong>長度必須均一</strong>！這裡是個不均一的例子：</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>...           [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>]])</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>stdin<span class="op">&gt;</span>:<span class="dv">1</span>: VisibleDeprecationWarning: Creating an ndarray <span class="im">from</span> ragged nested sequences (which <span class="kw">is</span> a <span class="bu">list</span><span class="op">-</span><span class="kw">or</span><span class="op">-</span><span class="bu">tuple</span> of lists<span class="op">-</span><span class="kw">or</span><span class="op">-</span>tuples<span class="op">-</span><span class="kw">or</span> ndarrays <span class="cf">with</span> different</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>lengths <span class="kw">or</span> shapes) <span class="kw">is</span> deprecated. If you meant to do this, you must specify <span class="st">&#39;dtype=object&#39;</span> when creating the ndarray.</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>array([<span class="bu">list</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]), <span class="bu">list</span>([<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>])], dtype<span class="op">=</span><span class="bu">object</span>)</span></code></pre></div>
<p>我們可以看到出來的結果的元素類型是 <code class="sourceCode python"><span class="bu">object</span></code> ，NumPy 自動將不等長的串列保持原樣輸入。如此一來就成為一個一維、長度二的陣列（內含兩個串列物件），各維度元素長度保持均一，因此是個合理的結果。不過合理歸合理，若我們的本意是要各 <code class="sourceCode python"><span class="bu">int</span></code> 元素做運算，這個地方就會出問題。<br />
所以除非這是我們刻意為之，盡可能先確認各維度內長度一致。</p>
<p>接下來介紹 <code class="sourceCode python">numpy.ndarray</code> 幾個良好特性：</p>
<ul>
<li><p>元素導向（ Elementwise ）的算符運算<br />
算術運算子（ Arithmetic operator ）所描述的運算（ <span class="math inline">\(+\)</span> 、 <span class="math inline">\(-\)</span> 、 <span class="math inline">\(\times\)</span> 、 <span class="math inline">\(\div\)</span> … 等等 ）會被適用在所有元素，且若是兩個相同形狀（ shape ）的 <code class="sourceCode python">numpy.ndarray</code> 做算術運算結果會是兩陣列相對的元素各自做運算。</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>]) <span class="op">+</span> np.array([<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>])</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>])</span></code></pre></div></li>
<li><p>魔術般的切片（ slicing ）</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> np.array([[ <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>,  <span class="dv">5</span>],</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>],  <span class="co"># 切片區塊: [12, 13, 14, 15]</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>],  <span class="co">#           [22, 23, 24, 25]</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>, <span class="dv">34</span>, <span class="dv">45</span>],</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">41</span>, <span class="dv">42</span>, <span class="dv">43</span>, <span class="dv">44</span>, <span class="dv">45</span>],</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">51</span>, <span class="dv">52</span>, <span class="dv">53</span>, <span class="dv">54</span>, <span class="dv">55</span>]])</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a[<span class="dv">1</span>:<span class="dv">3</span>, <span class="dv">1</span>:]</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>],</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>]])</span></code></pre></div></li>
<li><p>變形金剛般的重塑（ Reshape ）</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> np.array([[ <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>,  <span class="dv">5</span>],  <span class="co"># 原本是一個 5x5 矩陣（二軸 numpy.ndarray ）</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>],</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>],</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>, <span class="dv">34</span>, <span class="dv">45</span>],</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">41</span>, <span class="dv">42</span>, <span class="dv">43</span>, <span class="dv">44</span>, <span class="dv">45</span>],</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">51</span>, <span class="dv">52</span>, <span class="dv">53</span>, <span class="dv">54</span>, <span class="dv">55</span>]])</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a.reshape(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>)  <span class="co"># 變成兩個 3x5 矩陣（三軸 numpy.ndarray ）</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>array([[[ <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>,  <span class="dv">5</span>],</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>],</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>]],</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>       [[<span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>, <span class="dv">34</span>, <span class="dv">45</span>],</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">41</span>, <span class="dv">42</span>, <span class="dv">43</span>, <span class="dv">44</span>, <span class="dv">45</span>],</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">51</span>, <span class="dv">52</span>, <span class="dv">53</span>, <span class="dv">54</span>, <span class="dv">55</span>]]])</span></code></pre></div></li>
<li><p>超專業的線性代數操作</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> np.array([[<span class="dv">1</span> ,<span class="dv">2</span> ,<span class="dv">3</span>],</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>],</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]])</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> i <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>],</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>]])</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">@</span> i  <span class="co"># 矩陣內積</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>],</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]])</span></code></pre></div></li>
<li><p>子彈般的執行速度</p>
<ul>
<li><a href="https://numpy.org/doc/stable/user/whatisnumpy.html#why-is-numpy-fast">Official explaination: Why is NumPy fast?</a> - The NumPy community<br />
</li>
<li><a href="https://realpython.com/numpy-tensorflow-performance/">Pure Python vs NumPy vs TensorFlow Performance Comparison</a> - by RealPython</li>
</ul></li>
</ul>
<p>重要的 <code class="sourceCode python">numpy.ndarray</code> 屬性</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">屬性</th>
<th style="text-align: left;">意思</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>numpy.ndarray.ndim</code></td>
<td style="text-align: left;">有幾個軸</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>numpy.ndarray.shape</code></td>
<td style="text-align: left;">每個軸的資料長度</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>numpy.ndarray.size</code></td>
<td style="text-align: left;">共有多少個元素</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>numpy.ndarray.dtype</code></td>
<td style="text-align: left;">元素的資料類別，可為 Python 內建類別或 NumPy 類別</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>numpy.ndarray.itemsize</code></td>
<td style="text-align: left;">整個陣列在記憶體中佔多少位元組</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> c <span class="op">=</span> np.arange(<span class="dv">24</span>).reshape(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> c</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>array([[[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>],</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        [ <span class="dv">4</span>,  <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>],</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>        [ <span class="dv">8</span>,  <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>]],</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>       [[<span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>],</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>],</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>]]])</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> c.ndim</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> c.shape</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> c.size</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="dv">24</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> c.dtype</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>dtype(<span class="st">&#39;int64&#39;</span>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> c.itemsize</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span></span></code></pre></div>
</section>
<section id="如何建立-numpy.ndarray" class="level2">
<h2>如何建立 <code class="sourceCode python">numpy.ndarray</code> ？</h2>
<p>NumPy 提供相當多方式建構一個 <code class="sourceCode python">numpy.ndarray</code> 這裡介紹三大類方法：</p>
<ul>
<li>借助 <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array"><code class="sourceCode python">numpy.array</code></a> 函式<br />
身為一個類型， <code class="sourceCode python">numpy.ndarray</code> 當然可以透過呼叫取得 <code class="sourceCode python">numpy.ndarray</code> 的實例（ instance ），但語法相對不直覺。 NumPy 提供一個函式能夠輕鬆的建立 <code class="sourceCode python">numpy.ndarray</code> ，即「 <code class="sourceCode python">numpy.array</code> 」。</li>
<li>借助其他輔助函式<br />
這裡介紹：<a href="https://numpy.org/doc/stable/reference/generated/numpy.eye.html"><code class="sourceCode python">numpy.eye</code></a> 、 <a href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html"><code class="sourceCode python">numpy.zeros</code></a> 、與 <a href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html"><code class="sourceCode python">numpy.arange</code></a></li>
<li>其他方式<br />
這裡介紹：<a href="https://numpy.org/doc/stable/reference/generated/numpy.copy.html"><code class="sourceCode python">numpy.copy</code></a></li>
</ul>
<section id="借助-numpy.arrayarray-函式" class="level3">
<h3>借助 <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array"><code class="sourceCode python">numpy.array</code></a> 函式</h3>
<p>這是最單純的創建方式。將類陣列（ <a href="https://numpy.org/doc/stable/glossary.html#term-array_like">array_like</a> ）的物件傳入第一個位置參數，該物件將描述陣列的「外觀」；第二個位置參數（ <code class="sourceCode python">dtype</code> ）用於指定元素的類別，不一定要給，若是沒指定 NumPy 會猜測最適合的類別。</p>
<p>用法： <code class="sourceCode python">numpy.array(<span class="bu">object</span>, dtype<span class="op">=</span><span class="va">None</span>)</code></p>
<p><code class="sourceCode python"><span class="bu">object</span></code> 可為以下類別： <code class="sourceCode python"><span class="bu">list</span></code> ， <code class="sourceCode python"><span class="bu">tuple</span></code> ， <code class="sourceCode python">numpy.ndarray</code> ， … 等等（或甚至 <code class="sourceCode python"><span class="bu">str</span></code> ）。 <code class="sourceCode python">dtype</code> 可能為 Python 內建類別（ <code class="sourceCode python"><span class="bu">int</span></code>, <code class="sourceCode python"><span class="bu">float</span></code> 等等）或是任意 <a href="https://numpy.org/doc/stable/reference/arrays.dtypes.html"><code class="sourceCode python">numpy.dtype</code></a> 。</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([(<span class="dv">1</span>, <span class="dv">2</span>), (<span class="dv">3</span>, <span class="dv">4</span>)])</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">3</span>, <span class="dv">4</span>]])</span></code></pre></div>
<p>需要注意的是，<code class="sourceCode python">numpy.array</code> 只接受一個到兩個位置參數，而定義「形狀」的位置參數位於第一個位置參數。我們不能一股腦地將元素直接倒進 <code class="sourceCode python">numpy.array</code> ，而是要將元素先包成一包再丟入 <code class="sourceCode python">numpy.array</code> 。</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>])  <span class="co"># 正確</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>])</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)  <span class="co"># 錯誤</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>Traceback (most recent call last):</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  File <span class="st">&quot;&lt;stdin&gt;&quot;</span>, line <span class="dv">1</span>, <span class="kw">in</span> <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="pp">TypeError</span>: array() takes <span class="im">from</span> <span class="dv">1</span> to <span class="dv">2</span> positional arguments but <span class="dv">5</span> were given</span></code></pre></div>
<p>利用 <code class="sourceCode python">numpy.array</code> 建立陣列時可以同時指定類別：</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([<span class="fl">1.23</span>, <span class="fl">2.7</span>, <span class="fl">3.14</span>], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span></code></pre></div>
<p>不指定類型時， NumPy 會依據元素猜測該給予怎麼樣的類別給陣列。猜測的原則簡單講是「在可描述所有元素的情況下，最精準的那個」。</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>...           [<span class="dv">3</span>, <span class="ot">2j</span>, <span class="dv">2</span>]])  <span class="co"># 這行有個「 2j 」，NumPy 猜這個陣列要用複數（ complex ）描述</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>array([[<span class="fl">1.</span><span class="op">+</span><span class="ot">0.j</span>, <span class="fl">2.</span><span class="op">+</span><span class="ot">0.j</span>, <span class="fl">3.</span><span class="op">+</span><span class="ot">0.j</span>],</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">3.</span><span class="op">+</span><span class="ot">0.j</span>, <span class="fl">0.</span><span class="op">+</span><span class="ot">2.j</span>, <span class="fl">2.</span><span class="op">+</span><span class="ot">0.j</span>]])</span></code></pre></div>
</section>
<section id="借助其他輔助函式" class="level3">
<h3>借助其他輔助函式</h3>
<section id="numpy.arangearange" class="level4">
<h4><a href="https://numpy.org/doc/stable/reference/generated/numpy.arange.html"><code class="sourceCode python">numpy.arange</code></a></h4>
<p>藉由定義數字元素起始點、終點、與間距以獲得一個一維數字陣列。<br />
用法: <code class="sourceCode python">numpy.arange([start, ]stop[, step], dtype<span class="op">=</span><span class="va">None</span>)</code><br />
<code class="sourceCode python">start</code> 、 <code class="sourceCode python">stop</code> 、與 <code class="sourceCode python">step</code> 可以是任意實數。</p>
<p>若省略 <code class="sourceCode python">start</code> ，預設值將會是 0 ；若省略 <code class="sourceCode python">step</code> 預設值將會是 1 。<br />
<code class="sourceCode python">numpy.arange</code> 的行為基本上與 <code class="sourceCode python"><span class="bu">range</span></code> 一致，除了它會回傳完整的 <code class="sourceCode python">numpy.ndarray</code> 物件而不是 <code class="sourceCode python"><span class="bu">range</span></code> 這個迭代器（ iterator ）物件。</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.arange(<span class="dv">5</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.arange(<span class="dv">3</span>, <span class="dv">10</span>, <span class="dv">2</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">3.</span>, <span class="fl">5.</span>, <span class="fl">7.</span>, <span class="fl">9.</span>])</span></code></pre></div>
<p>有趣的是，我們可以將 <code class="sourceCode python">step</code> 設為一個浮點數（ <code class="sourceCode python"><span class="bu">float</span></code> ），如此一來就能收到一個間距是浮點數的陣列。</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">.3</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>array([<span class="fl">0.</span> , <span class="fl">0.3</span>, <span class="fl">0.6</span>, <span class="fl">0.9</span>])</span></code></pre></div>
<p>不過由於浮點數精確度並不穩定的問題，並不推薦使用這種方法。 若有這種需求，請洽 <a href="https://numpy.org/doc/stable/reference/generated/numpy.linspace.html"><code class="sourceCode python">numpy.linspace</code></a> 。</p>
</section>
<section id="numpy.eyeeye" class="level4">
<h4><a href="https://numpy.org/doc/stable/reference/generated/numpy.eye.html"><code class="sourceCode python">numpy.eye</code></a></h4>
<p>建立一個對角線為 1 其餘為 0 的二維陣列，但是兩個維度的長度及對角線的上下偏移都各自可調整。<br />
用法: <code class="sourceCode python">numpy.eye(N, M<span class="op">=</span><span class="va">None</span>, k<span class="op">=</span><span class="dv">0</span>, dtype<span class="op">=&lt;</span><span class="kw">class</span> <span class="st">&#39;float&#39;</span><span class="op">&gt;</span>)</code><br />
N 須為整數，指定第一維度的長度（也就是有幾列）。<br />
M 須為整數，指定第二維度的長度（也就是有幾行）。若省略則預設與 N 相同。<br />
k 須為整數，指定對角線 1 的偏移量。正值為往上偏移，負值則向下。若省略或設為零則由 <span class="math inline">\((0, 0)\)</span> 開始。</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.eye(<span class="dv">3</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>array([[<span class="fl">1.</span>, <span class="fl">0.</span>, <span class="fl">0.</span>],</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.</span>, <span class="fl">1.</span>, <span class="fl">0.</span>],</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>       [<span class="fl">0.</span>, <span class="fl">0.</span>, <span class="fl">1.</span>]])</span></code></pre></div>
<p>將對角線的 1 向下偏移兩次：</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.eye(<span class="dv">5</span>, <span class="dv">4</span>, <span class="op">-</span><span class="dv">2</span>, dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>]])</span></code></pre></div>
<p>相似 <code class="sourceCode python">numpy.eye</code> 的函式還有 <a href="https://numpy.org/doc/stable/reference/generated/numpy.identity.html"><code class="sourceCode python">numpy.identity</code></a> ，會製作一個單位矩陣（ identity metrix ）。</p>
</section>
<section id="numpy.zeroszeros" class="level4">
<h4><a href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html"><code class="sourceCode python">numpy.zeros</code></a></h4>
<p>製作一個全部元素均為 0 的多維陣列，通常拿來初始化特定形狀的陣列。<br />
用法： <code class="sourceCode python">numpy.zeros(shape, dtype<span class="op">=</span><span class="bu">float</span>)</code></p>
<p><code class="sourceCode python">shape</code> 可為一個整數或一個整數數列（記得要打包在一起）。</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.zeros([<span class="dv">3</span>, <span class="dv">3</span>], dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>]])</span></code></pre></div>
<p>類似 <code class="sourceCode python">numpy.zeros</code> 的函式還有 <code class="sourceCode python">numpy.ones</code> 與 <code class="sourceCode python">numpy.full</code> ，一個填充 1 ，另一個的填充物由我們指定。</p>
</section>
</section>
<section id="其他方式" class="level3">
<h3>其他方式</h3>
<p><a href="https://numpy.org/doc/stable/reference/generated/numpy.copy.html"><code class="sourceCode python">numpy.copy</code></a><br />
複製一份陣列。<br />
用法： <code class="sourceCode python">numpy.copy(a)</code></p>
<p>這個函式等效於 <code class="sourceCode python">numpy.ndarray.copy</code> 。<br />
另外請注意以上兩者的複製僅止於淺層複製（ shallow copy ），若需要真正的將整個物件複製（深層複製（deep copy ））請洽 <code class="sourceCode python">copy.deepcopy</code> 。</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> g <span class="op">=</span> np.arange(<span class="dv">3</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> g2 <span class="op">=</span> g</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> g3 <span class="op">=</span> np.copy(g)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> g3[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> g2[<span class="dv">0</span>] <span class="op">==</span> g[<span class="dv">0</span>]</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> g3[<span class="dv">0</span>] <span class="op">==</span> g[<span class="dv">0</span>]</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span></code></pre></div>
</section>
</section>
<section id="numpy.ndarray-被印出時的反應" class="level2">
<h2><code class="sourceCode python">numpy.ndarray</code> 被印出時的反應</h2>
<p>一維陣列被印出時會與串列相同：</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>]</span></code></pre></div>
<p>二維陣列被印出時會將元素對齊：</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(np.array([[<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]]))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span>]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span>]]</span></code></pre></div>
<p>三維陣列被印出時會將第一維用空行隔開：</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(np.arange(<span class="dv">18</span>).reshape((<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>)))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>[[[ <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  [ <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>]</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  [ <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>]]</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a> [[ <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span>]</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  [<span class="dv">12</span> <span class="dv">13</span> <span class="dv">14</span>]</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  [<span class="dv">15</span> <span class="dv">16</span> <span class="dv">17</span>]]]</span></code></pre></div>
<p>要是陣列太大 NumPy 會自動跳過中間，只顯示角落的數值：</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(np.arange(<span class="dv">10000</span>).reshape(<span class="dv">100</span>, <span class="dv">100</span>))</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>[[   <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">2</span> ...   <span class="dv">97</span>   <span class="dv">98</span>   <span class="dv">99</span>]</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a> [ <span class="dv">100</span>  <span class="dv">101</span>  <span class="dv">102</span> ...  <span class="dv">197</span>  <span class="dv">198</span>  <span class="dv">199</span>]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a> [ <span class="dv">200</span>  <span class="dv">201</span>  <span class="dv">202</span> ...  <span class="dv">297</span>  <span class="dv">298</span>  <span class="dv">299</span>]</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a> ...</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9700</span> <span class="dv">9701</span> <span class="dv">9702</span> ... <span class="dv">9797</span> <span class="dv">9798</span> <span class="dv">9799</span>]</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9800</span> <span class="dv">9801</span> <span class="dv">9802</span> ... <span class="dv">9897</span> <span class="dv">9898</span> <span class="dv">9899</span>]</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9900</span> <span class="dv">9901</span> <span class="dv">9902</span> ... <span class="dv">9997</span> <span class="dv">9998</span> <span class="dv">9999</span>]]</span></code></pre></div>
</section>
<section id="基本操作" class="level2">
<h2>基本操作</h2>
<p>算術運算子會應用到每個元素上：</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]) <span class="op">+</span> <span class="dv">4</span>  <span class="co"># 陣列加上一個整數</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>])</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> h <span class="op">=</span> np.array([[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>],</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]])</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> h2 <span class="op">=</span> np.array([[<span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">2</span>],</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>...                [<span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">2</span>],</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>...                [<span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">2</span>]])</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> h <span class="op">-</span> h2  <span class="co"># 相同大小的陣列減法</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">5</span>],</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]])</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> h3 <span class="op">=</span> np.array([[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>...                [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>...                [<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]])</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> h4 <span class="op">=</span> h3 <span class="op">&gt;</span> <span class="dv">5</span>  <span class="co"># 邏輯運算也沒問題</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> h4</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>array([[<span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>],</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>       [<span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>],</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>       [ <span class="va">True</span>,  <span class="va">True</span>,  <span class="va">True</span>]])</span></code></pre></div>
<p>Numpy 讓一維陣列相加減的寫法變得相當有意義，因為這正是向量相加減的數學寫法。另外這個特性也讓我們在需要將整個矩陣做某個偏移時免去手動撰寫迴圈的麻煩。</p>
<p>不過熟悉線性代數的朋友一定想問：「啊你把乘法算符拿去做元素導向的乘法了，內外積該不會要我自己動手？」</p>
<p>「交給我！」NumPy 說道。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]) <span class="op">@</span> np.array([<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>])  <span class="co"># 內積</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.outer(np.array([<span class="dv">1</span>, <span class="dv">2</span>]), np.array([<span class="dv">3</span>, <span class="dv">4</span>]))  <span class="co"># 外積</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">6</span>, <span class="dv">8</span>]])</span></code></pre></div>
<p>程式語言裡面方便的原地（ in-place ）算符也有：</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> i <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> i <span class="op">+=</span> <span class="dv">4</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> i</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>])</span></code></pre></div>
<p>若兩個不同類別的陣列或數字做運算， NumPy 也會跟創建 <code class="sourceCode python">numpy.ndarray</code> 時一樣，自動去猜測結果的類別：</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> j <span class="op">=</span> np.ones(<span class="dv">10</span>, dtype<span class="op">=</span><span class="bu">int</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> j2 <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">10</span>, dtype<span class="op">=</span><span class="bu">float</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> j3 <span class="op">=</span> j <span class="op">+</span> j2</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> j3.dtype</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>dtype(<span class="st">&#39;float64&#39;</span>)</span></code></pre></div>
<p>許多一元運算（ unary operation ）（如 <code class="sourceCode python"><span class="bu">sum</span></code> ）都有實作在 <code class="sourceCode python">numpy.ndarray</code> 上：</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k <span class="op">=</span> np.array([[<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">7</span>],</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">7</span>],</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="op">-</span><span class="dv">5</span>]])</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k.<span class="bu">sum</span>()</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="dv">47</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k.<span class="bu">min</span>()</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="dv">5</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k.<span class="bu">max</span>()</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span></span></code></pre></div>
<p>這些一元運算都能指定一個軸，若有指定則會照著指定軸的方向運算：</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">11</span>,  <span class="dv">9</span>])</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> k.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">20</span>, <span class="dv">18</span>,  <span class="dv">9</span>])</span></code></pre></div>
<p>也就是：</p>
<pre><code>axis = 0 時：             axis = 1 時：
[4    3    6    7 ]       [4 + 3 + 6 +   7 ] = 20
 +    +    +    +         [1 + 9 + 1 +   7 ] = 18
[1    9    1    7 ]       [7 + 3 + 4 + (-5)] =  9
 +    +    +    +         ==&gt; [20 18 9]
[7    3    4  (-5)]
 =    =    =    =
[12   15   11   9 ]</code></pre>
</section>
<section id="universal-functionsuniversal" class="level2">
<h2><a href="https://numpy.org/doc/stable/reference/ufuncs.html">Universal Functions</a></h2>
<p>請原諒我沒有翻譯這個名詞，這個詞太難了。官方給的定義是 — 「 Universal function （下稱 ufunc ）是個作用在 <code class="sourceCode python">numpy.ndarray</code> 時會一個元素一個元素分開做運算、支援 <a href="https://numpy.org/doc/stable/reference/ufuncs.html#ufuncs-broadcasting">array broadcasting</a> 、 <a href="https://numpy.org/doc/stable/reference/ufuncs.html#ufuncs-casting">type casting</a> 與其他林林總總標準特色的函式。是一個接受固定數量特定輸入後產出固定數量特定輸出的函數的<a href="https://numpy.org/doc/stable/glossary.html#term-vectorization">『向量化』</a>包裝」。</p>
<p>講白一點就是本文所稱的「元素導向」的函式。<br />
屬於 ufunc 的函式有 <code class="sourceCode python">numpy.sin</code> 、 <code class="sourceCode python">numpy.cos</code> 、 <code class="sourceCode python">numpy.exp</code> … 等等，包含實作上面所提及的一元運算和算術運算子的函式。</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.cos(np.array([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>]))</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>array([ <span class="fl">1.</span>        ,  <span class="fl">0.54030231</span>, <span class="op">-</span><span class="fl">0.41614684</span>])</span></code></pre></div>
<p>可利用的 ufunc 列表在<a href="https://numpy.org/doc/stable/reference/ufuncs.html#available-ufuncs">這裡</a>。</p>
</section>
<section id="索引-indexing-與切片-slicing" class="level2">
<h2>索引（ indexing ）與切片（ slicing ）</h2>
<p>一維陣列的索引與切片行為跟原生 Python 串列一模一樣：</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m <span class="op">=</span> np.arange(<span class="dv">5</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m[<span class="dv">3</span>]  <span class="co"># 索引第四個元素</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m[<span class="dv">1</span>:<span class="dv">3</span>]  <span class="co"># 切出第 2 個到第 3 個元素</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">1</span>, <span class="dv">2</span>])</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m[::<span class="dv">2</span>]  <span class="co"># 切出位於雙數位置的元素</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>])</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m[::<span class="op">-</span><span class="dv">1</span>]  <span class="co"># 元素倒轉排列</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>])</span></code></pre></div>
<p>高維度陣列的索引、切片語法是在中括號 [] 內將每個維度的動作用逗號「 , 」分隔開獨立處理：</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2 <span class="op">=</span> np.arange(<span class="dv">25</span>).reshape((<span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>],</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>],</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>],</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>],</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>]])</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2[::<span class="dv">2</span>]  <span class="co"># 省略第二個軸的切片、索引，可以看到若省略則視同全選</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>],</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>],</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>]])</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2[<span class="dv">1</span>:<span class="dv">4</span>, <span class="dv">1</span>:<span class="dv">3</span>]  <span class="co"># 在第一個軸的方向選取第 2 到第 4 、在第二個軸選取第 2 到第 3 個元素</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">6</span>,  <span class="dv">7</span>],</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">11</span>, <span class="dv">12</span>],</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">16</span>, <span class="dv">17</span>]])</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2[:, <span class="dv">1</span>]  <span class="co"># 第一軸方向全選，第二軸方向只選第 2 個元素</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>array([ <span class="dv">1</span>,  <span class="dv">6</span>, <span class="dv">11</span>, <span class="dv">16</span>, <span class="dv">21</span>])</span></code></pre></div>
<p><code class="sourceCode python">numpy.ndarray</code> 也接受使用一個數列作為選取的方式：</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2[[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">4</span>], :<span class="dv">3</span>]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>],</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>],</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>]])</span></code></pre></div>
<p>上面的語法意思是「第一軸取第 1 、 2 、 5 個元素，第二軸取前 3 個元素」。<br />
<code class="sourceCode python">numpy.ndarray</code> 也接受用遮罩（ mask ）過濾的方式取值：</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> mask <span class="op">=</span> np.identity(<span class="dv">5</span>) <span class="op">==</span> <span class="va">True</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> mask</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>array([[ <span class="va">True</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>],</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>       [<span class="va">False</span>,  <span class="va">True</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>],</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>       [<span class="va">False</span>, <span class="va">False</span>,  <span class="va">True</span>, <span class="va">False</span>, <span class="va">False</span>],</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>       [<span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>,  <span class="va">True</span>, <span class="va">False</span>],</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>       [<span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>, <span class="va">False</span>,  <span class="va">True</span>]])</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>],</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>],</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>],</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>],</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>]])</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2[mask]</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>array([ <span class="dv">0</span>,  <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">24</span>])</span></code></pre></div>
<p>「<code class="sourceCode python">...</code>」 這個關鍵字在處理高維度陣列的時候帶來許多好處。<br />
假設 <code class="sourceCode python">x</code> 有五個軸：</p>
<ul>
<li><code>x[1, 2, ...]    等同於 x[1, 2, :, :, :]</code></li>
<li><code>x[..., 3]       等同於 x[:, :, :, :, 3]</code></li>
<li><code>x[4, ..., 5, :] 等同於 x[4, :, :, 5, :]</code></li>
</ul>
</section>
<section id="迭代-iteration" class="level2">
<h2>迭代 （ iteration ）</h2>
<!-- TODO: what is an iteration -->
<p>單純的迭代過 <code class="sourceCode python">numpy.ndarray</code> 會迭代第一個軸：</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m3 <span class="op">=</span> np.array([[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>...                [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>...                [<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]])</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> m3:</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>...     <span class="bu">print</span>(i)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span>]</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>]</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span>]</span></code></pre></div>
<p>想迭代過所有的元素，請使用 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.flat.html"><code class="sourceCode python">numpy.ndarray.flat</code></a> ：</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> i <span class="kw">in</span> m3.flat:</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>...     <span class="bu">print</span>(i)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span></span></code></pre></div>
<p>NumPy 也提供一個函式讓你迭代過所有元素的同時取得它的位置：</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="cf">for</span> index, i <span class="kw">in</span> np.ndenumerate(m3):</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>...     <span class="bu">print</span>(index, i)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>(<span class="dv">0</span>, <span class="dv">0</span>) <span class="dv">0</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>(<span class="dv">0</span>, <span class="dv">1</span>) <span class="dv">1</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>(<span class="dv">0</span>, <span class="dv">2</span>) <span class="dv">2</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span>, <span class="dv">0</span>) <span class="dv">3</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span>, <span class="dv">1</span>) <span class="dv">4</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span>, <span class="dv">2</span>) <span class="dv">5</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span>, <span class="dv">0</span>) <span class="dv">6</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span>, <span class="dv">1</span>) <span class="dv">7</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span>, <span class="dv">2</span>) <span class="dv">8</span></span></code></pre></div>
</section>
<section id="重塑" class="level2">
<h2>重塑</h2>
<p>介紹三種重塑的方法： <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.ravel.html"><code class="sourceCode python">numpy.ndarray.ravel</code></a> 、 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.reshape.html"><code class="sourceCode python">numpy.ndarray.reshape</code></a> 、 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.T.html"><code class="sourceCode python">numpy.ndarray.T</code></a> 。<br />
以及疊放（ stacking ）的兩種方法： <a href="https://numpy.org/doc/stable/reference/generated/numpy.vstack.html"><code class="sourceCode python">numpy.vstack</code></a> 、<a href="https://numpy.org/doc/stable/reference/generated/numpy.hstack.html"><code class="sourceCode python">numpy.hstack</code></a> 。<br />
還有拆分（ splitting ）的兩種方法： <a href="https://numpy.org/doc/stable/reference/generated/numpy.vsplit.html"><code class="sourceCode python">numpy.vsplit</code></a> 、 <a href="https://numpy.org/doc/stable/reference/generated/numpy.hsplit.html"><code class="sourceCode python">numpy.hsplit</code></a> 。</p>
<p>這一章節使用以下陣列做介紹：</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> n <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>],</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">5</span>, <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>],</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>...               [<span class="dv">9</span>, <span class="dv">0</span>, <span class="dv">11</span>, <span class="dv">12</span>]])</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> n.shape</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>(<span class="dv">3</span>, <span class="dv">4</span>)</span></code></pre></div>
<p>陣列 n 為一個有兩個軸的陣列，第一軸方向的長度是 3 ，第二軸方向長度是 4 。</p>
<section id="numpy.ndarray.tt" class="level3">
<h3><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.T.html"><code class="sourceCode python">numpy.ndarray.T</code></a></h3>
<p><code class="sourceCode python">numpy.ndarray</code> 的屬性之一，為該陣列的轉置（ transpose ）。</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> n.T</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">1</span>,  <span class="dv">5</span>,  <span class="dv">9</span>],</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">2</span>,  <span class="dv">6</span>, <span class="dv">10</span>],</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">3</span>,  <span class="dv">7</span>, <span class="dv">11</span>],</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">4</span>,  <span class="dv">8</span>, <span class="dv">12</span>]])</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> n.T.shape</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>(<span class="dv">4</span>, <span class="dv">3</span>)</span></code></pre></div>
<!-- TODO: 轉置是啥？ -->
<p>相似作用的函式有： <a href="https://numpy.org/doc/stable/reference/generated/numpy.transpose.html#numpy.transpose"><code class="sourceCode python">numpy.transpose</code></a></p>
</section>
<section id="numpy.ndarray.reshapereshape" class="level3">
<h3><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.reshape.html"><code class="sourceCode python">numpy.ndarray.reshape</code></a></h3>
<p>回傳指定形狀的陣列。<br />
用法： <code class="sourceCode python">numpy.ndarray.reshape(shape)</code></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> n.reshape((<span class="dv">4</span>, <span class="dv">3</span>))</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>],</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">4</span>,  <span class="dv">5</span>,  <span class="dv">6</span>],</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>],</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">0</span>, <span class="dv">11</span>, <span class="dv">12</span>]])</span></code></pre></div>
<p>相似的方法（ method ）或函式還有 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.resize.html"><code>numpy.ndarray.resize</code></a> 、<a href="https://numpy.org/doc/stable/reference/generated/numpy.reshape.html"><code class="sourceCode python">numpy.reshape</code></a> 、與 <a href="https://numpy.org/doc/stable/reference/generated/numpy.resize.html"><code>numpy.resize</code></a> 。</p>
</section>
<section id="numpy.ndarray.ravelravel" class="level3">
<h3><a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.ravel.html"><code class="sourceCode python">numpy.ndarray.ravel</code></a></h3>
<p>回傳一個扁平化的陣列。</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> n.ravel()</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>array([ <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>,  <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>,  <span class="dv">0</span>, <span class="dv">11</span>, <span class="dv">12</span>])</span></code></pre></div>
<p>與 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.flat.html"><code class="sourceCode python">numpy.ndarray.flat</code></a> 的不同點是，flat 會回傳一個迭代器（ iterator ），而此方法會回傳一個陣列。<br />
與其相似的函式有 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ravel.html"><code>numpy.ravel</code></a> 。</p>
</section>
<section id="numpy.vstackvstack" class="level3">
<h3><a href="https://numpy.org/doc/stable/reference/generated/numpy.vstack.html"><code class="sourceCode python">numpy.vstack</code></a></h3>
<p>將多個等長的數列垂直疊放在一起。<br />
用法： <code class="sourceCode python">numpy.vstack(tup)</code><br />
注意要把所有數列合成一個大數列再放進去。</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> o1 <span class="op">=</span> np.array([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>...                [<span class="dv">3</span>, <span class="dv">4</span>]])</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> o2 <span class="op">=</span> np.array([[<span class="dv">5</span>, <span class="dv">6</span>],</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>...                [<span class="dv">7</span>, <span class="dv">8</span>]])</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.vstack((o1, o2))</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">5</span>, <span class="dv">6</span>],</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">7</span>, <span class="dv">8</span>]])</span></code></pre></div>
</section>
<section id="numpy.hstackhstack" class="level3">
<h3><a href="https://numpy.org/doc/stable/reference/generated/numpy.hstack.html"><code class="sourceCode python">numpy.hstack</code></a></h3>
<p>將多個等長的數列水平疊放在一起。<br />
用法： <code class="sourceCode python">numpy.hstack(tup)</code><br />
注意要把所有數列合成一個大數列再放進去。</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.hstack((o1, o2))</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>],</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">8</span>]])</span></code></pre></div>
</section>
<section id="numpy.hsplithsplit" class="level3">
<h3><a href="https://numpy.org/doc/stable/reference/generated/numpy.hsplit.html"><code class="sourceCode python">numpy.hsplit</code></a></h3>
<p>沿著水平方向將陣列內元素平均分配成數個小組。<br />
用法: <code class="sourceCode python">numpy.hsplit(arry, indices_or_sections) <span class="op">-&gt;</span> <span class="bu">list</span></code><br />
arry 是即將被拆分的陣列、indices_or_sections 指定平均要拆分成幾組。回傳值是包含陣列的串列。</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> p <span class="op">=</span> np.arange(<span class="dv">20</span>).reshape((<span class="dv">2</span>, <span class="dv">10</span>))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> p</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>,  <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>],</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>]])</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.hsplit(p, <span class="dv">2</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>[array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>],</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>]]), array([[ <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>],</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>]])]</span></code></pre></div>
</section>
<section id="numpy.vsplitvsplit" class="level3">
<h3><a href="https://numpy.org/doc/stable/reference/generated/numpy.vsplit.html"><code class="sourceCode python">numpy.vsplit</code></a></h3>
<p>沿著垂直方向將陣列內元素平均分配成數個小組。<br />
用法: <code class="sourceCode python">numpy.vsplit(arry, indices_or_sections) <span class="op">-&gt;</span> <span class="bu">list</span></code><br />
arry 是即將被拆分的陣列、indices_or_sections 指定平均要拆分成幾組。回傳值是包含陣列的串列。</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> p.resize((<span class="dv">4</span>, <span class="dv">5</span>))</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> p</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>],</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>],</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>],</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>]])</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.vsplit(p, <span class="dv">4</span>)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>[array([[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]]), array([[<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]]), array([[<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>]]), array([[<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>]])]</span></code></pre></div>
</section>
</section>
<section id="view-與複製" class="level2">
<h2>「 View 」與複製</h2>
<p>此章節講述 View 的概念與幾個複製陣列的方法。</p>
<section id="這樣做不會複製任何東西" class="level3">
<h3>這樣做不會複製任何東西</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>])</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q2 <span class="op">=</span> q</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q2 <span class="kw">is</span> q</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span></code></pre></div>
<p>q2 和 q 對應到同一個儲存陣列的記憶體區塊，所以修改 q2 等同於修改 q ，反之亦然。</p>
</section>
<section id="view-最淺層的複製" class="level3">
<h3>View — 最淺層的複製</h3>
<p>View 是一種衍生於原始陣列的新陣列。 View 沒有屬於自己的元素，它所展現的元素都是原始陣列的元素，所以說試圖修改 View 的元素值將會導致原始陣列的元素被改變。</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q3 <span class="op">=</span> q.view()   <span class="co"># q3 是 q 的 View</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">type</span>(q3)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span><span class="kw">class</span> <span class="st">&#39;numpy.ndarray&#39;</span><span class="op">&gt;</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q3 <span class="kw">is</span> q  <span class="co"># q3 並不是 q ，至少佔用的記憶體區段不一樣</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q3.base <span class="kw">is</span> q  <span class="co"># q3 是從 q 生出來的</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q3.flags.owndata  <span class="co"># q3 自己並不擁有資料</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q3.resize((<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q3.shape</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q.shape   <span class="co"># View 的形狀可以跟原始陣列不一樣</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>(<span class="dv">4</span>,)</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q3[<span class="dv">1</span>, <span class="dv">1</span>] <span class="op">=</span> <span class="dv">1234</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>array([   <span class="dv">1</span>,    <span class="dv">3</span>,    <span class="dv">4</span>, <span class="dv">1234</span>])  <span class="co"># 但是 View 的元素還是原始陣列的</span></span></code></pre></div>
</section>
<section id="更深一層複製" class="level3">
<h3>更深一層複製</h3>
<p><a href="https://numpy.org/doc/stable/reference/generated/numpy.copy.html"><code class="sourceCode python">numpy.copy</code></a> 這個函式與 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.copy.html"><code class="sourceCode python">numpy.ndarray.copy</code></a> 方法可以幫你進行更深一層複製。</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q4 <span class="op">=</span> q.copy()</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q4 <span class="kw">is</span> q</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="va">False</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q4[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">9999</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>array([   <span class="dv">1</span>,    <span class="dv">3</span>,    <span class="dv">4</span>, <span class="dv">1234</span>])</span></code></pre></div>
<p>我們可以看到 q4 不但不是 q ，而且改動 q4 也不會影響 q 了！<br />
複製這個動作有時候蠻有用的，例如我們只需要一個大陣列的其中一部份，我們可以把需要的部份切片下來，複製之後再把舊的大陣列刪除。</p>
</section>
<section id="完全複製" class="level3">
<h3>完全複製</h3>
<p>上面提供的兩種複製方式在大部份情況下都可以高枕無憂，但是請看下面例子：</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="st">&#39;m&#39;</span>, [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]], dtype<span class="op">=</span><span class="bu">object</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> b <span class="op">=</span> a.copy()</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> b</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">1</span>, <span class="st">&#39;m&#39;</span>, <span class="bu">list</span>([<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])], dtype<span class="op">=</span><span class="bu">object</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> b[<span class="dv">2</span>][<span class="dv">0</span>] <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> a</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>array([<span class="dv">1</span>, <span class="st">&#39;m&#39;</span>, <span class="bu">list</span>([<span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">4</span>])], dtype<span class="op">=</span><span class="bu">object</span>)</span></code></pre></div>
<p>儘管使用了 <code class="sourceCode python">numpy.ndarray.copy</code> 進行複製，結果內容物還是被修改了。<br />
在這個情況下，我們可以看到原始陣列 a 裝著各式物件。Python 有個特性：表面上沒有指標（ pointer ）的概念，但水面下任何 Python 的可變（ mutable ）物件存取都是指標。舉例來說，在本章第一節「這樣做不會複製任何東西」的例子裡面， <code class="sourceCode python">q2 <span class="op">=</span> q</code> 這個動作代表的意義是「將儲存在 q 上面，指向該陣列記憶體位置的值賦予給 q2 」。當我們每次呼叫 q2 或是 q ，Python 直譯器（ interpreter ）就會沿著指標的值查找實體記憶體，再將實體記憶體裡的串列值抓出來給你看。</p>
<p>這邊把該例搬下來方便查看：</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>])</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q2 <span class="op">=</span> q</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> q2 <span class="kw">is</span> q  <span class="co"># is 運算式會比較兩者的記憶體位置，若相同就回傳 True</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="va">True</span></span></code></pre></div>
<p>了解可變物件存取都是指標的概念後我們再回頭看上方的例子。a 三個元素分別是 <code class="sourceCode python"><span class="bu">int</span></code> 、 <code class="sourceCode python"><span class="bu">str</span></code> 、 <code class="sourceCode python"><span class="bu">list</span></code> ，整數及字串都是不可變物件，但是串列正是可變物件。也就是說 <code class="sourceCode python">a[<span class="dv">2</span>]</code> 的位置事實上存著的是串列 <code class="sourceCode python">[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</code> 的記憶體位置（就是指標）。當我們把 a 的所有值都複製給 b 時，我們也只把指標複製給 b ，並沒有把串列 <code class="sourceCode python">[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]</code> 的值複製到另一個記憶體區塊，並把新的指標存進 <code class="sourceCode python">b[<span class="dv">2</span>]</code> 。</p>
<p>於是 b 的第三個元素便還是存著跟 a 的第三個元素相同的記憶體位置參照，改動 <code class="sourceCode python">b[<span class="dv">2</span>]</code> 裡的元素當然會影響 <code class="sourceCode python">a[<span class="dv">2</span>]</code> 裡的元素。這樣的複製我們稱為「淺層複製」。</p>
<p>經過以上的討論，我們可以發現這件事情只有在「要複製的物件中存放著可變物件」這個情況會發生。我們再回過頭來看 NumPy 的應用場景，絕大部份都是數值運算，數值都是不可變物件，所以絕大部分我們都可以高枕無憂。</p>
<p>也許你會問：「這樣的情況無法避免嗎？」</p>
<p>其實還是可以的，上面建立陣列的章節也提到過，相對於淺層複製還有一個名詞叫「深層複製」。深層複製就是真正的從頭到尾、無論深度都建立一份新的物件，我們可以利用 <code class="sourceCode python">copy.deepcopy</code> 做到這件事。</p>
</section>
</section>
<section id="小技巧" class="level2">
<h2>小技巧</h2>
<section id="自動成型" class="level3">
<h3>自動成型</h3>
<p>當你在使用 <code class="sourceCode python">numpy.reshape</code> 的時候可以把其中一個參數交給 NumPy 決定：</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> r <span class="op">=</span> np.arange(<span class="dv">24</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> r.reshape(<span class="dv">2</span>, <span class="op">-</span><span class="dv">1</span>, <span class="dv">4</span>)  <span class="co"># -1 代表交給 NumPy 幫你算出這邊該分配幾個</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>array([[[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>],</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>        [ <span class="dv">4</span>,  <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>],</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>        [ <span class="dv">8</span>,  <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>]],</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>       [[<span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>],</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>],</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>        [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>]]])</span></code></pre></div>
</section>
<section id="運用兩個等長的一維陣列組成一個二維陣列" class="level3">
<h3>運用兩個等長的一維陣列組成一個二維陣列</h3>
<p>利用 <code class="sourceCode python">numpy.vstack</code> 可輕鬆做到：</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s1 <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> s2 <span class="op">=</span> np.array([<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>])</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> np.vstack((s1, s2))</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>array([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>],</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]])</span></code></pre></div>
</section>
<section id="運用邏輯運算抽取元素" class="level3">
<h3>運用邏輯運算抽取元素</h3>
<p>我們可以把陣列本身化為索引遮罩來過濾符合條件的元素。</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2 <span class="op">=</span> np.arange(<span class="dv">25</span>).reshape((<span class="dv">5</span>, <span class="dv">5</span>))</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>array([[ <span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>],</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>       [ <span class="dv">5</span>,  <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>],</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>],</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>],</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>       [<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>]])</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> m2[m2 <span class="op">&gt;</span> <span class="dv">5</span>]  <span class="co"># 過濾出所有大於 5 的元素</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>array([ <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>,</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>       <span class="dv">23</span>, <span class="dv">24</span>])</span></code></pre></div>
</section>
</section>
<section id="最後" class="level2">
<h2>最後</h2>
<p>以上我們粗淺的體驗了 NumPy 提供的陣列的特性與基本操作，希望能讓大家踏入 NumPy 的第一步更加順暢。本文到這裡結束，祝各位有個更好的明天。</p>
<p>我們有緣，再見。</p>
</section>
<section id="你可能還想看" class="level2">
<h2>你可能還想看…</h2>
<ul>
<li>官方使用者手冊
<ul>
<li><a href="https://numpy.org/doc/stable/user/absolute_beginners.html">Official Guide for absolutely beginer</a> — 從安裝到畫圖，任何全新手需要的都在這裡</li>
<li><a href="https://numpy.org/doc/stable/user/index.html">Official Guide</a> — 基本上我是抄這邊的</li>
<li><a href="https://numpy.org/doc/stable/user/basics.html">NumPy Fundamentals</a> — 另外一份更詳盡的官方說明書</li>
</ul></li>
<li><a href="https://numpy.org/doc/stable/reference/index.html">NumPy API references</a></li>
<li>索引與切片
<ul>
<li><a href="https://numpy.org/doc/stable/reference/arrays.indexing.html#arrays-indexing">indexing API reference</a></li>
<li><a href="https://numpy.org/doc/stable/user/basics.indexing.html#combining-index-arrays-with-slices">indexing user guide</a></li>
</ul></li>
<li><a href="https://stackoverflow.com/questions/40378427/numpy-formal-definition-of-array-like-objects">Literally, WHAT IS array_like?</a> — StackOverflow 上的討論串，藉由研究底層 C 原始碼發現：基本上任何東西都是類陣列物件</li>
<li><a href="https://numpy.org/doc/stable/reference/ufuncs.html#available-ufuncs">list of ufunc</a> — 完整的 ufunc 清單</li>
<li><a href="https://numpy.org/doc/stable/user/tutorial-svd.html">Tutorial: Linear algebra on n-dimensional arrays</a> — NumPy 官方以處理照片為例子示範 NumPy 的線性代數應用。</li>
<li><a href="https://commons.wikimedia.org/wiki/File:NumPy_logo_2020.svg">你可以在這裡找到標題的圖片</a></li>
</ul>
</section>
<script src="scripts/floating-toc.js" type="text/javascript"></script>
</body>
</html>
